<% title "Responding to #{@survey.job_title}" %>
<% highlight_tab("surveys") %>
<%= render :partial => "questions/participation_form"%>
<% content_for :initialize_js, 'createMasks();' %>
<script type="text/javascript">
  function createMasks() {
    $$('input.WageResponse, input.BaseWageResponse').each(function(field) {
      <% if @participation.errors.any? then %>
        var units = field.up().adjacent('select.units').first();
      <% else %>
        var units = field.adjacent('select.units').first();
      <% end %>
      new inputMask(field, 'currency', units);
    });

    $$('input.NumericalResponse').each(function(field) {
      new inputMask(field, 'number');
    });

    $$('input.PercentResponse').each(function(field) {
      new inputMask(field, 'percent');
    });
  }
</script>
